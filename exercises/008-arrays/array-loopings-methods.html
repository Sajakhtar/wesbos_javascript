<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>

  </title>
  <link rel="stylesheet" href="../../base.css">
</head>

<body>
  <script>
    const toppings = [
            'Mushrooms ',
            'Tomatoes',
            'Eggs',
            'Chili',
            'Lettuce',
            'Avocado',
            'Chiles',
            'Bacon',
            'Pickles',
            'Onions',
            'Cheese',
];

    const students = [
            {
                    id: '11ce',
                    first_name: 'Dall',
                    last_name: 'Puckring',
            },
            {
                    id: '2958',
                    first_name: 'Margarete',
                    last_name: 'Brandi',
            },
            {
                    id: '565a',
                    first_name: 'Bendicty',
                    last_name: 'Woodage',
            },
            {
                    id: '3a16',
                    first_name: 'Micki',
                    last_name: 'Mattes',
            },
            {
                    id: 'f396',
                    first_name: 'Flory',
                    last_name: 'Gladeche',
            },
            {
                    id: 'de5f',
                    first_name: 'Jamill',
                    last_name: 'Emilien',
            },
            {
                    id: '54cb',
                    first_name: 'Brett',
                    last_name: 'Aizikowitz',
            },
            {
                    id: '9135',
                    first_name: 'Lorry',
                    last_name: 'Smallman',
            },
            {
                    id: '978f',
                    first_name: 'Gilly',
                    last_name: 'Flott',
            },
    ];

    const people = [
            {
                    birthday: 'April 22, 1993',
                    names: {
                            first: 'Keith',
                            last: 'Buckley',
                    },
            },
            {
                    birthday: 'January 3, 1975',
                    names: {
                            first: 'Larry',
                            last: 'Heep',
                    },
            },
            {
                    birthday: 'February 12, 1944',
                    names: {
                            first: 'Linda',
                            last: 'Bermeer',
                    },
            },
    ];

    const buns = ['egg', 'wonder', 'brioche'];

    const meats = {
            beyond: 10,
            beef: 5,
            pork: 7,
    };

    const prices = {
            hotDog: 453,
            burger: 765,
            sausage: 634,
            corn: 234,
    };

    const orderTotals = [342, 1002, 523, 34, 634, 854, 1644, 2222];

    const feedback = [
            { comment: 'Love the burgs', rating: 4 },
            { comment: 'Horrible Service', rating: 2 },
            { comment: 'Smoothies are great, liked the burger too', rating: 5 },
            { comment: 'Ambiance needs work', rating: 3 },
            { comment: 'I DONT LIKE BURGERS', rating: 1 },
    ];

    const faces = ['😃', '🤠', '🤡', '🤑', '😵', '🌞', '🐶', '😺'];

    const inventory = [
            { type: 'shirt', price: 4000 },
            { type: 'pants', price: 4532 },
            { type: 'socks', price: 234 },
            { type: 'shirt', price: 2343 },
            { type: 'pants', price: 2343 },
            { type: 'socks', price: 542 },
            { type: 'pants', price: 123 },
    ];

    /* **************
      Looping Methods
      ***************
    */

    function logTopping(topping) {
            console.log(topping);
    }

    toppings.forEach(logTopping);
    // or in one line
    toppings.forEach((topping) => console.log(topping));

    function logTopping2(topping, index, array) {
            console.log(topping, index, array);
    }

    toppings.forEach(logTopping2);

    toppings.forEach((topping, i, array) => console.log(topping, i, array));

    function logTopping3(topping, index, originalArray) {
            // log the topping
            console.log(topping);
            // log the prev topping if there is one
            const prevTopping = originalArray[index - 1];
            prevTopping ? console.log(prevTopping) : null;
    
            // log the next topping if there is one
            const nextTopping = originalArray[index + 1];
            nextTopping ? console.log(nextTopping) : null;
    
            // if its the last item in the array, say good bye
            console.log('-------🍕-------');

            if (index === originalArray.length - 1) {
                    console.log('Goodbye');
            }

            index === originalArray.length - 1 ? console.log('Goodbye ternary') : null;
    
            index === originalArray.length - 1 && console.log('Goodbye && Trick');
    }

    toppings.forEach(logTopping3);

    // ********************************
    // The Big 3 - Map, Filter, Reduce
    // ********************************

    console.clear();

    // *********
    // Mapping
    // *********

    function addArms(face) {
            return `👋 ${face} 👋`;
    }

    const toys = faces.map(addArms);
    console.log(toys);

    const fullNames = ['wes', 'jim', 'jon'].map((name) => `${name} Bos`);
    console.log(fullNames);

    function capitalize(word) {
            return `${word[0].toUpperCase()}${word.slice(1)}`;
    }

    function bosify(name) {
            return `${capitalize(name)} Bos`;
    }

    const fullNames2 = ['wes', 'jim', 'jon'].map(bosify);
    console.log(fullNames2);

    // or chain Maps
    const fullNames3 = ['wes', 'jim', 'jon'].map(capitalize).map(bosify);
    console.log(fullNames3);

    // Map with numbers
    const orderTotalsWithTax = orderTotals.map((total) => Math.round((total *= 1.12)));
    console.log(orderTotalsWithTax);

    function attachBody(face, body) {
            return `
              ${face}
    　　　　　${body.repeat(3)}
    　　　　 ${Array(3).fill(body).join(' ')}
    　　　👇🏽　 ${body.repeat(2)}　👇🏽
            ${Array(2).fill(body).join('   ')}
            ${Array(2).fill(body).join('   ')}
    　　　　　👢　　👢
          `;
    }

    faces.map((face) => attachBody(face, '🍟')).forEach((body) => console.log(body));

    // Mapping on arrays of objects:
    console.clear();

    const cleanPeople = people.map(function (person) {
            // get birthday timestamp
            const bday = new Date(person.birthday).getTime();
            // console.dir(bday); // to see all date methods
    
            // calculate age
            const now = Date.now(); // current timestamp
            // console.dir(now);

            // to compare dates, change to timestamps in milliseconds

            // 1000 ms in a second, 60s in mins, 60m in hour, 24h in day, 365d in year
            const age = Math.floor((now - bday) / (1000 * 60 * 60 * 24 * 365));
            // onsole.log(age);

            // return object of full name, birthday
            return { name: `${person.names.first} ${person.names.last}`, age };
    });

    console.table(cleanPeople);

    // ****************************************
    // Filter, Find and Higher Order Functions
    // ****************************************

    // filter
    const over40 = cleanPeople.filter((person) => person.age > 40);

    console.table(over40);

    // find
    const student = students.find((s) => s.id === '565a');
    console.log(student);

    // higer order func

    function isStudent(student) {
            return student.id === '565a';
    }

    const student2 = students.find(isStudent);
    console.log(student2);

    function findById(id) {
            return function isStudent(student) {
                    return student.id === id;
            };
    }

    const student3 = students.find(findById('565a'));
    console.log(student3);

    // more flexible higher order func to find by any property
    function findByProp(prop, propWeAreLookingFor) {
            return function isStudent(student) {
                    return student[prop] === propWeAreLookingFor;
            };
    }

    const student4 = students.find(findByProp('id', '565a'));
    console.log(student4);

    const student5 = students.find(findByProp('last_name', 'Flott'));
    console.log(student5);

    // *******
    // Reduce
    // *******
    console.clear();

    // add the orderTotals array

    const grandTotal = orderTotals.reduce((a, b) => a + b, 0);
    console.log(grandTotal);

    function tallyNumbers(tally, current) {
            return tally + current;
    }

    const grandTotal2 = orderTotals.reduce(tallyNumbers, 0); // start tally at 0
    console.log(grandTotal2);

    // Reduce on objects

    function inventoryReducer(totals, item) {
            //     console.log(item.type);
            // increment the type by one
            totals[item.type] = totals[item.type] + 1 || 1;
            // return the total (accumulator) so the next loop can use it
            return totals;
    }
    const inventoryCounts = inventory.reduce(inventoryReducer, {});
    console.log(inventoryCounts);

    const totalInventoryPrice = inventory.reduce((acc, item) => acc + item.price, 0);
    console.log(totalInventoryPrice);
  </script>
</body>

</html>